#!/usr/bin/env bash
rootPath=$1

# remove module overlay network
networks="${CONTECO_TYPE^^}_GLOBAL_NETWORKS"
if [[ "${!networks}" == *"${CONTECO_TYPE}_overlay"* ]] ; then
	executionplane docker network rm ${CONTECO_TYPE}_overlay
fi

# this should be restricted to module containers only, but how?
executionplane docker container prune --force

# create initialised module volumes on all nodes
volumePrefix=$(echo "${CONTECO_TYPE}" | tr '.-' '_')
IFS=',' read -r -a volumes <<< "${MODECO_DC_GLOBAL_VOLUMES}"
for volume in ${volumes[@]};
do
	executionplane docker volume rm --force ${volumePrefix}_${volume}
	done;
